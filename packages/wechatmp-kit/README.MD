# ğŸ‰ å¾®ä¿¡å…¬ä¼—å·å¼€å‘å·¥å…·åŒ… ğŸ› ï¸

ä¸€ä¸ªåŸºäºTypeScriptçš„å¾®ä¿¡å…¬ä¼—å·å¼€å‘å·¥å…·åŒ…ï¼Œæä¾›æ ¸å¿ƒAPIæ¥å£å’Œå®ç”¨å·¥å…·ã€‚

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

- ğŸ”‘ **Access Tokenç®¡ç†**
  - âœ… è‡ªåŠ¨è·å–å’Œç¼“å­˜Access Token
  - ğŸ› ï¸ æ”¯æŒè‡ªå®šä¹‰Tokenç¼“å­˜å®ç°
- ğŸ“¨ **æ¶ˆæ¯å¤„ç†**
  - ğŸ“ XMLæ¶ˆæ¯è§£æä¸ç”Ÿæˆ
  - ğŸ“¦ æ¶ˆæ¯æœåŠ¡å°è£…
- ğŸ‘¤ **ç”¨æˆ·ç®¡ç†**
  - ğŸ› ï¸ æä¾›ç”¨æˆ·æœåŠ¡æ¥å£
- ğŸŒ **é€šç”¨è¯·æ±‚**
  - ğŸ“¡ å°è£…å¾®ä¿¡APIè¯·æ±‚

## ğŸ“¦ å®‰è£…

```bash
npm install wechatmp-kit
# æˆ–è€…
yarn add wechatmp-kit
```

## âš¡ å¿«é€Ÿå¼€å§‹

### åˆå§‹åŒ–

```typescript
import { WechatMpApi } from 'wechatmp-kit'

const wechatApi = new WechatMpApi({
  appId: 'ä½ çš„åº”ç”¨ID',
  appSecret: 'ä½ çš„åº”ç”¨å¯†é’¥',
})
```

### è·å–Access Token

```typescript
const token = await wechatApi.getAccessToken()
console.log('Access Token:', token)
```

### å¤„ç†æ¶ˆæ¯

```typescript
const messageService = wechatApi.getMessageService('your-token')
const parsedMessage = messageService.parseXML(xmlMessage)
```

### ä½¿ç”¨ç”¨æˆ·æœåŠ¡ ğŸ‘¤

```typescript
const userService = wechatApi.userService

// è·å–ç”¨æˆ·åˆ—è¡¨
const userList = await userService.userGet()

// æŒ‰æ ‡ç­¾è·å–ç”¨æˆ·
const taggedUsers = await userService.userTagGet(tagId)

// è·å–æ‰€æœ‰æ ‡ç­¾
const tags = await userService.tagsGet()

// å‘é€æ¨¡æ¿æ¶ˆæ¯
await userService.messageTemplateSend({
  touser: openId,
  template_id: 'TEMPLATE_ID',
  data: {
    key1: { value: 'å†…å®¹1' },
    key2: { value: 'å†…å®¹2' },
  },
})
```

## ğŸ“š API å‚è€ƒ

### WechatMpApi

#### æ„é€ å‡½æ•°

```typescript
new WechatMpApi(options: {
  appId: string
  appSecret: string
  tokenCache?: WehcatMpAccessTokenCacheManager
})
```

#### ä¸»è¦æ–¹æ³•

- `getAccessToken()`: è·å–å½“å‰Access Token
- `getMessageService(token: string, encodingAESKey?: string)`: è·å–æ¶ˆæ¯å¤„ç†æœåŠ¡
- `request<T>(options: RequestOptions)`: å‘é€å¾®ä¿¡APIè¯·æ±‚

### WehcatMpAccessTokenCacheManager

Tokenç¼“å­˜ç®¡ç†æ¥å£ï¼Œé»˜è®¤æä¾›å†…å­˜ç¼“å­˜å®ç°ã€‚

#### æ–¹æ³•

- `get(appId: string)`: è·å–ç¼“å­˜Token
- `set(appId: string, value: AccessTokenApiResult)`: è®¾ç½®ç¼“å­˜Token

## å·¥å…·å‡½æ•°

- `parseWehcatMessageXML<T>(xml: string)`: è§£æå¾®ä¿¡XMLæ¶ˆæ¯
- `renderXML(data: Record<string, string | number | object>)`: ç”ŸæˆXMLæ¶ˆæ¯

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Pull Requestã€‚è¯·ç¡®ä¿ä»£ç é£æ ¼ä¸€è‡´å¹¶é€šè¿‡æ‰€æœ‰æµ‹è¯•ã€‚

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚
