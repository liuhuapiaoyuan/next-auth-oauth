# ğŸš€ NextAuth OAuthå¢å¼º

`next-auth-oauth` æ˜¯ä¸€ä¸ªåŸºäº Next.js å’Œ NextAuth çš„å¢å¼ºæ’ä»¶ï¼Œæ—¨åœ¨ç®€åŒ–å’Œå¢å¼ºæˆæƒç™»å½•çš„å¤„ç† ğŸ”ã€‚è¯¥æ’ä»¶æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç¬¬ä¸‰æ–¹ç™»å½•ç»‘å®šã€è´¦æˆ·ç®¡ç†ç­‰ï¼Œè®©æˆæƒæµç¨‹æ›´åŠ é«˜æ•ˆå’Œçµæ´» ğŸ’ªã€‚
ä¸ºå›½äººğŸš©æä¾›æ›´çˆ½çš„é›†æˆï¼š æ”¯æŒ `å¾®ä¿¡å…¬ä¼—å·ç™»å½•` ğŸ‰ã€`å¾®ä¿¡ç½‘é¡µç™»å½•` ğŸŒã€`Gitee` ç™»å½• ğŸ“š

## ç›®å½•

| åŒ…å                                                                                                                                                                                                                | æè¿°                                                                               |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------- |
| ![next-auth-oauth](https://img.shields.io/npm/v/next-auth-oauth.svg?logo=nodedotjs&label=next-auth-oauth&link=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fnext-auth-oauth)                                              | NextAuth çš„ OAuth å¢å¼ºåº“ï¼Œæä¾›å¯¹ç¬¬ä¸‰æ–¹ç™»å½•ã€è´¦å·å¯†ç ç™»å½•çš„é›†æˆï¼Œæ–¹ä¾¿é›†æˆåˆ°è‡ªå»ºç™»å½• |
| ![next-auth-oauth/qq](https://img.shields.io/npm/v/@next-auth-oauth/qq?logo=nodedotjs&label=@next-auth-oauth/qq&link=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F@next-auth-oauth/qq)                                   | æ”¯æŒé€šè¿‡ QQ è¿›è¡Œ OAuth è®¤è¯çš„æ’ä»¶ã€‚                                                |
| ![next-auth-oauth/weibo](https://img.shields.io/npm/v/@next-auth-oauth/weibo?logo=nodedotjs&label=@next-auth-oauth/weibo&link=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F@next-auth-oauth/weibo)                       | æ”¯æŒé€šè¿‡å¾®åšè¿›è¡Œ OAuth è®¤è¯çš„æ’ä»¶ã€‚                                                |
| ![next-auth-oauth/gitee](https://img.shields.io/npm/v/@next-auth-oauth/gitee?logo=nodedotjs&label=@next-auth-oauth/gitee&link=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F@next-auth-oauth/gitee)                       | æ”¯æŒé€šè¿‡ Gitee è¿›è¡Œ OAuth è®¤è¯çš„æ’ä»¶ã€‚                                             |
| ![next-auth-oauth/authing](https://img.shields.io/npm/v/@next-auth-oauth/authing?logo=nodedotjs&label=@next-auth-oauth/authing&link=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F@next-auth-oauth/authing)               | æ”¯æŒé€šè¿‡ Authing è¿›è¡Œ OAuth è®¤è¯çš„æ’ä»¶ã€‚                                           |
| ![next-auth-oauth/wechat](https://img.shields.io/npm/v/@next-auth-oauth/wechat?logo=nodedotjs&label=@next-auth-oauth/wechat&link=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F@next-auth-oauth/wechat)                   | æ”¯æŒé€šè¿‡å¾®ä¿¡è¿›è¡Œ OAuth è®¤è¯çš„æ’ä»¶ã€‚                                                |
| ![next-auth-oauth/wechatmp](https://img.shields.io/npm/v/@next-auth-oauth/wechatmp?logo=nodedotjs&label=@next-auth-oauth/wechatmp&link=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F@next-auth-oauth/wechat)             | å…¬ä¼—å·äºŒç»´ç éªŒè¯ç™»å½•ã€æ¶ˆæ¯å›å¤éªŒè¯ç™»å½•                                             |
| ![next-auth-oauth/nextjs](https://img.shields.io/npm/v/@next-auth-oauth/nextjs?logo=nodedotjs&label=@next-auth-oauth/nextjs&link=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F@next-auth-oauth/wechat)                   | TODOï¼šUIç»„ä»¶ï¼Œnextjsé…å¥—çš„UIç»„ä»¶                                                   |
| ![next-auth-oauth/slide-verify](https://img.shields.io/npm/v/@next-auth-oauth/slide-verify?logo=nodedotjs&label=@next-auth-oauth/slide-verify&link=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F@next-auth-oauth/wechat) | TODOï¼šæ»‘åŠ¨è¡Œä¸ºéªŒè¯ç                                                                |

## ç‰¹æ€§ âœ¨

- **å¢å¼ºçš„ `signIn` ç™»å½•å‡½æ•°**: è‡ªåŠ¨å¤„ç†ç»‘å®šåœºæ™¯å’Œç™»å½•éªŒè¯ï¼Œå°†éªŒè¯é€»è¾‘è½¬å‘ç»™ `UserService` ğŸ”„
- **å¢åŠ  Session**: è‡ªåŠ¨å¤„ç† `jwt`/`database` ä¸‹ä¸åŒæƒ…å†µçš„ `user.id` å¡«å…… ğŸ—ƒï¸
- **å¤šç§æˆæƒæ“ä½œ**: æ”¯æŒç™»å½•ã€ç™»å‡ºã€æ³¨å†Œã€è§£ç»‘ç¬¬ä¸‰æ–¹è´¦å·ç­‰ ğŸ”‘
- **æ”¯æŒå¤šç§ç¬¬ä¸‰æ–¹ç™»å½•æä¾›å•†**: å¦‚ GitHub å’Œ WeChat ğŸŒ
- **è‡ªå®šä¹‰ç»‘å®šæˆæƒé¡µé¢ UI**: é…ç½® `bindPage` æ”¯æŒè‡ªå®šä¹‰æˆæƒç»‘å®šé¡µé¢ ğŸ¨
- **å›½äº§åŒ–ç¬¬ä¸‰æ–¹ç™»å½•é›†æˆ**: æ”¯æŒ `å¾®ä¿¡å…¬ä¼—å·ç™»å½•` ğŸ‰ã€`å¾®ä¿¡ç½‘é¡µç™»å½•` ğŸŒã€`Gitee` ç™»å½• ğŸ“š

## ä½¿ç”¨æ–¹æ³• ğŸ› ï¸

1. **å®ç° `IUserService` æ¥å£**: ç”¨äºå¤„ç†ç”¨æˆ·ç›¸å…³æ“ä½œ ğŸ‘¤
2. **é…ç½®æˆæƒé€‚é…å™¨**: æ ¹æ®éœ€æ±‚è®¾ç½®æˆæƒé€‚é…å™¨ ğŸ”§
3. **å¯¼å‡ºå¦‚ä¸‹å­—æ®µ**:

   - **`signIn`**: ç™»å½•å‡½æ•°ï¼Œå¢å¼ºåå¯ä»¥è‡ªåŠ¨åˆ¤æ–­ç»‘å®šåœºæ™¯/ç™»å½•éªŒè¯ ğŸ”‘
   - **`signOut`**: ç™»å‡ºå‡½æ•° ğŸšª
   - **`auth`**: æˆæƒå‡½æ•° ğŸ›¡ï¸
   - **`listAccount`**: è·å¾—ç»‘å®šçš„ç¬¬ä¸‰æ–¹æ•°æ® ğŸ“Š
   - **`unBindOauthAccountInfo`**: è§£ç»‘ç¬¬ä¸‰æ–¹è´¦å· ğŸ”“
   - **`handlers`**: æˆæƒå‡½æ•°çš„ä¸­é—´ä»¶ âš™ï¸
   - **`regist`**: è´¦æˆ·æ³¨å†Œå‡½æ•° ğŸ“
   - **`oauthProviders`**: åˆ—å‡ºç¬¬ä¸‰æ–¹ç™»å½•æä¾›å•† ğŸŒ

## TODOS:

- [x] æ–‡æ¡£å®Œå–„ï¼Œæ–‡æ¡£ç½‘ç«™
  - [ ] å®Œå–„`next-auth-oauth` ä½¿ç”¨æ–‡æ¡£
  - [ ] å®Œå–„`next-auth-oauth/wechat` æ–‡æ¡£
  - [ ] å®Œå–„`next-auth-oauth/wechatmp` æ–‡æ¡£
  - [ ] å®Œå–„`next-auth-oauth/authing` æ–‡æ¡£
  - [ ] å®Œå–„`next-auth-oauth/github` æ–‡æ¡£
  - [ ] å®Œå–„`next-auth-oauth/qq` æ–‡æ¡£
  - [ ] å®Œå–„`next-auth-oauth/weibo` æ–‡æ¡£
  - [ ] å®Œå–„`wechatmp-kit` æ–‡æ¡£
- [x] æ¡ˆä¾‹ç½‘ç«™
- [ ] å°è£…ç™»å½•ï¼Œæ³¨å†Œï¼Œç»‘å®šï¼Œè´¦æˆ·ä¿¡æ¯ç»„ä»¶åº“(nextjs)`next-auth-oauth/nextjs`
- [ ] æ»‘åŠ¨è¡Œä¸ºéªŒè¯ç»„ä»¶ `next-auth-oauth/slide-verify`

## æ¡ˆä¾‹: æ‰“é€ åŸºäº`nextjs`ã€`prisma`å’Œ`next-auth-oauth`çš„å®Œæ•´æˆæƒç³»ç»Ÿ

![ç™»å½•](assets/nextjs-uaa-login-pc.png)
![ç§»åŠ¨ç«¯å…¼å®¹](assets/nextjs-uaa-login.png)
![æ³¨å†Œ](assets/nextjs-uaa-regist.png)
![è´¦æˆ·ç™»å½•ç»‘å®š](assets/nextjs-uaa-oauth-login.png)

## è´¡çŒ®

æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼å¦‚æœä½ å‘ç°äº†é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œè¯·æäº¤é—®é¢˜æŠ¥å‘Šæˆ–æ‹‰å–è¯·æ±‚ã€‚

## è®¸å¯è¯

è¯¥é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](LICENSE) è¿›è¡Œæˆæƒã€‚

---

å¦‚éœ€æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… [NextAuth å®˜æ–¹æ–‡æ¡£](https://next-auth.js.org/) ä»¥äº†è§£å¦‚ä½•é›†æˆæˆæƒåŠŸèƒ½ã€‚
